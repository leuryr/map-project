var Model=[{name:"Yankee Stadium",location:{lat:40.829622,lng:-73.926173},typeEnabled:ko.observable(!0),types:["stadium"],vicinity:"1 E 161st St, Bronx"},{name:"The Bronx Museum of the Arts",location:{lat:40.831011,lng:-73.919719},typeEnabled:ko.observable(!0),types:["museum"],vicinity:"1040 Grand Concourse, Bronx"},{name:"Concourse Plaza",location:{lat:40.825227,lng:-73.920491},typeEnabled:ko.observable(!0),types:["shopping_mall"],vicinity:"220 E 161st St, Bronx"},{name:"Bronx County Family Court",location:{lat:40.826746,lng:-73.920696},typeEnabled:ko.observable(!0),types:["courthouse"],vicinity:"900 Sheridan Ave, Bronx"},{name:"Bronx County Hall of Justice",location:{lat:40.826102,lng:-73.919612},typeEnabled:ko.observable(!0),types:["courthouse"],vicinity:"265 E 161st St, Bronx"},{name:"Bronx Supreme Court",location:{lat:40.826173,lng:-73.923834},typeEnabled:ko.observable(!0),types:["courthouse"],vicinity:"851 Grand Concourse #111, Bronx"},{name:"Heritage Field",location:{lat:40.827023,lng:-73.927761},typeEnabled:ko.observable(!0),types:["park"],vicinity:", Bronx"},{name:"Joseph Yancey Track and Field",location:{lat:40.828025,lng:-73.929016},typeEnabled:ko.observable(!0),types:["park"],vicinity:", Bronx"},{name:"Joyce Kilmer Park",location:{lat:40.828522,lng:-73.922673},typeEnabled:ko.observable(!0),types:["park"],vicinity:"Walton Ave, Bronx"},{name:"Mullaly Park",location:{lat:40.833092,lng:-73.924046},typeEnabled:ko.observable(!0),types:["park"],vicinity:"Jerome Ave, Bronx"}],initApp=function(){map=new google.maps.Map(document.getElementById("map"),{center:Model[8].location,zoom:16,mapTypeControl:!1}),ko.applyBindings(new ViewModel)},mapFail=function(){alert("Google Maps could not load at this time. Please try again later.")},ViewModel=function(){var self=this;self.locations=ko.observableArray(Model),self.listFilter=ko.observable(),self.listFilter.subscribe(function(newValue){var simpleValue=newValue.toLowerCase();self.locations().forEach(function(item){item.name.toLowerCase().indexOf(simpleValue)>=0?(item.typeEnabled(!0),item.marker.setVisible(!0)):(item.typeEnabled(!1),item.marker.setVisible(!1),item.marker==infoWindowService.marker&&0==item.marker.visible&&(infoWindowService.close(),infoWindowService.marker=null))})});var infoWindowService=new google.maps.InfoWindow;self.fillInfoWindow=function(item,infoWindow){if(infoWindow.marker!=item.marker){if(infoWindow.marker=item.marker,item.hasOwnProperty("vicinity"))var address=item.vicinity,firstLine=address.substring(0,address.indexOf(",")),secondLine="Bronx, NY";else var firstLine=item.location.formattedAddress[0],secondLine=item.location.formattedAddress[1];infoWindow.setContent("<div>"+item.name+"<hr><br>"+firstLine+"<br>"+secondLine+"</div>"),infoWindow.open(map,item.marker),infoWindow.addListener("closeclick",function(){infoWindow.marker=null})}},self.createMarkers=function(array){array().forEach(function(item){if(!item.hasOwnProperty("marker")){var position=item.location,title=item.name,marker=new google.maps.Marker({position:position,title:title,map:map,animation:google.maps.Animation.DROP});marker.addListener("click",function(){self.animateMarker(this),self.fillInfoWindow(item,infoWindowService)}),item.marker=marker}})},self.createMarkers(self.locations),self.initType=function(item){item.typeEnabled=ko.observable(!0)};var fsClientID="HKK50PCWV51XRJQUJAF4UEQGULLAFOWIOVWOBYLJZFTP4FTF",fsClientSecret="LUCLK3BPYXTO3Q25GBSH0FSH3RSIKL0HS1O2BMALNYII2VMD",fsVersion=20160909,fsSearchCenter="40.828522,-73.922673",fsRadius=500,fsSection="food",fsURL="https://api.foursquare.com/v2/venues/explore?client_id="+fsClientID+"&client_secret="+fsClientSecret+"&v="+fsVersion+"&ll="+fsSearchCenter+"&radius="+fsRadius+"&section="+fsSection+"&limit=50";$.ajax({url:fsURL,dataType:"json",success:function(results){results.response.groups[0].items.forEach(function(item){self.initType(item.venue),self.locations.push(item.venue)}),self.createMarkers(self.locations)},error:function(result){var description;result.responseJSON.meta.errorType;description="Something wrong with request. Please contact site administrator.",alert("Could not retrieve Foursquare data.\n"+description)}}),self.getMarker=function(object){var marker=object.marker;self.animateMarker(marker)},self.getInfoWindow=function(object){self.fillInfoWindow(object,infoWindowService)},self.animateMarker=function(marker){marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){marker.setAnimation(null)},2150)};var listContainer=$(".list-container"),menuIcon=$(".menu-icon");self.toggleMenu=function(){listContainer.toggleClass("open-menu"),menuIcon.toggleClass("slide-icon")}};